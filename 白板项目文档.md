[toc]

### 一，需求分析

1，每个人都可以匿名加入白板（通过id），快速创建白板

即考虑有登陆的用户以及未登陆的用户，设计上可以考虑如果已经登陆，就将这个白板加入到用户的白板中，未登陆的用户留下的信息就保存在这次白板中。

创建白板只允许登陆用户创建。

通过链接的形式快速加入白板。

2，每个白板默认只有一页（图形实际画在页上），但可以添加新页

白板的保存形式考虑以png图片的方式，用户留下的痕迹生成png图片集，类似二维数组的形式

| 白板1 | 白板1历史版本1 | 白板1历史版本2 |
| ----- | -------------- | -------------- |
| 白板2 | 白板2历史版本1 | 白板2历史版本2 |

但是如果这样实现，后续中的高级功能中对图形样式的更改功能将很难实现。

3，每个人可以在白板某页上创建各类图形，并被其他人实时看到

同步功能实现不难，可以考虑生成hash值进行比对的方式判断是否有差异。

4，白板有协作和只读两种模式（只有白板创建者可以修改模式）只读模式下，每个人都不能编辑，且当前页自动同步

即白板还需要模式参数，在只读模式下除白板创建者以外都不能更改。

### 二，技术分析

1，白板实现

白板实现可以通过的前端canvas实现，然后储存目前想到的有两种方式。

- 通过canvas转换为png
- 记录canvas绘制路径

第一种方式较为简洁，在传输的时候消耗较大，对前面提到的后续高级功能对图形的调整几乎没有方法，但是实现起来较为简单，历史版本控制也会很容易。

第二种功能更为强大，可拓展性也更好，实现较难，然后控制起来也会有一定的难度。

但是做项目还是做难一点的吧。

2，数据存储

同样的对上面上面两种方式进行分析。

第一种前面已经提到了，可以通过类似二维数组的形式保存png图片，以较为简单明了的方式，可以保存修改者，每个历史版本这样。

第二种即保存每一次的绘制路径，后端需要处理绘制顺序，绘制信息等，然后由前端进行绘制，这样在传输的时候会更快并且扩展性更好。

3，实时传输

这个目前我也不知道如何去处理后端的问题，前端可以通过websocket等方式事实接收信息。



### 三，数据库设计

目前的原型就是用户以及白板两个。

用户只需要保存一些较为基础的信息，用于区分用户即可。

白板则需要保存白板名称，白板创建时间，白板所属者这些基本信息，以及最重要的白板内容。

交给杨文冠设计

### 四，原型设计

晚点来画

### 五，难点分析

1，白板实现

2，白板信息存储

3，实时更新



